{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="screen" href="{% static 'chat/css/main1.css' %}">
    <title>Chat Room</title>
</head>
<body>
  <div id="chat-container">
    {{ room_name | json_script:"room_name" }}

    <div id="videos">
      <video class="video-player" id="user-1"  autoplay playsinline></video>
      <video class="video-player" id="user-2" controls autoplay playsinline></video>
    </div>

    <div id="hide">
      <button onclick="createOffer()" id="create-offer">Create Offer</button>
      <label>SDP Offer</label>
      <textarea id="offer-sdp"></textarea>
    </div>

    <div id="hide">
      <button id="create-answer">Create Answer</button>
      <label>SDP Offer</label>
      <textarea id="answer-sdp"></textarea>
    </div>

    <div id="hide">
      <button id="add-answer">Add Answer</button>
    </div>

  </div>

  <!-- добавляет временную метку к скрипту main.js -->
  <script>document.write("<script type='text/javascript' src='{% static 'chat/js/main.js' %}?v=" + Date.now() + "'><\/script>");</script>

    <!-- <script src="{% static 'chat/js/main.js' %}"></script> -->
    <!-- <script src="{% static 'js/main1.js' %}"></script> -->

    <!-- <script>
      const roomName = "{{ room_name }}";
      console.log('ROOMNAME ' + roomName)
      const socket = new WebSocket(`ws://${window.location.host}/ws/chat/${roomName}/`);

      // Обработчик открытия соединения
      socket.addEventListener('open', (event) => {
          console.log('WebSocket connection opened:', event);
      });

      // Обработчик получения сообщения
      socket.addEventListener('message', (event) => {
          const messagesContainer = document.getElementById('chat-messages');
          const data = JSON.parse(event.data);
          const message = `${data.username}: ${data.message}`;
          messagesContainer.innerHTML += `<p>${message}</p>`;
      });

      // Обработчик закрытия соединения
      socket.addEventListener('close', (event) => {
          console.log('WebSocket connection closed:', event);
      });

      // Функция для отправки сообщения
      function sendMessage() {
          const inputElement = document.getElementById('message-input');
          const message = inputElement.value;
          if (message.trim() !== '') {
              socket.send(JSON.stringify({ 'message': message }));
              inputElement.value = '';
          }
      }

    </script>
</body>
</html> -->
